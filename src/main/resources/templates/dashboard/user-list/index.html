<!DOCTYPE html>
<html lang="az" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{dashboard/layout}">

<th:block layout:fragment="page-header">
    <h1 class="h3 mb-2 text-gray-800">üßë‚Äçüíª ƒ∞stifad…ô√ßil…ôrin ƒ∞dar…ô Edilm…ôsi</h1>
</th:block>

<div layout:fragment="content">

    <div class="row">

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">√úMUMƒ∞ ƒ∞STƒ∞FAD∆è√áƒ∞ SAYI</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800" th:text="${totalUsersCount}">0</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-users fa-2x text-primary"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">ADMƒ∞N / ƒ∞≈û√áƒ∞ HESABLARI</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800" th:text="${adminUsersCount}">...</div> </div>
                        <div class="col-auto">
                            <i class="fas fa-crown fa-2x text-warning"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">AKTƒ∞V HESABLAR</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800" th:text="${activeUsersCount}">...</div> </div>
                        <div class="col-auto">
                            <i class="fas fa-check-circle fa-2x text-success"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-danger shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">BLOKLANMI≈û HESABLAR</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800" th:text="${blockedUsersCount}">...</div> </div>
                        <div class="col-auto">
                            <i class="fas fa-ban fa-2x text-danger"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card shadow mb-4">
        <div class="card-header py-3 bg-white border-bottom-primary d-flex justify-content-between align-items-center">
            <h6 class="m-0 font-weight-bold text-primary" th:text="${pageTitle}"><i class="fas fa-list-ul me-2"></i> B√ºt√ºn ƒ∞stifad…ô√ßil…ôr</h6>
            <form th:action="@{/admin/users}" method="get" class="d-flex">
                <div class="input-group input-group-sm">
                    <input type="text" name="q" th:value="${query}" placeholder="Ad, Email, ID il…ô axtarƒ±≈ü..."
                           class="form-control bg-light small border-0 shadow-sm" style="min-width: 250px;">
                    <button class="btn btn-primary" type="submit">
                        <i class="fas fa-search fa-sm"></i> Axtar
                    </button>
                </div>
            </form>
        </div>

        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover" id="dataTable" width="100%" cellspacing="0"> <thead class="bg-primary text-white"> <tr>
                    <th class="border-0">#</th>
                    <th class="border-0">Ad Soyad</th>
                    <th class="border-0">Email</th>
                    <th class="border-0"><i class="fas fa-user-tag"></i> Rol(lar)</th>
                    <th class="border-0"><i class="fas fa-shield-alt"></i> Status</th>
                    <th class="border-0">∆èm…ôliyyatlar</th>
                </tr>
                </thead>
                    <tbody>
                    <tr th:each="user : ${users}">
                        <td th:text="${user.id}">1</td>
                        <td><i class="fas fa-user-circle me-2 text-primary"></i> <span th:text="${user.fullName}"></span></td>
                        <td th:text="${user.email}"></td>
                        <td>
                            <span th:class="${#strings.contains(user.roleNames, 'ADMIN') ? 'badge bg-warning text-dark p-2' : 'badge bg-secondary text-white p-2'}"
                                  th:text="${user.roleNames}">M√ú≈ûT∆èRƒ∞</span>
                        </td>
                        <td>
                            <span th:class="${user.status == 'AKTƒ∞V' ? 'badge bg-success text-white p-2' : 'badge bg-danger text-white p-2'}"
                                  th:text="${user.status}">AKTƒ∞V</span>
                        </td>
                        <td>
                            <a th:href="@{/admin/users/details/{id}(id=${user.id})}"
                               class="btn btn-sm btn-info text-white shadow-sm"
                               data-toggle="tooltip" title="Detallara Bax">
                                <i class="fas fa-user-edit"></i> ƒ∞dar…ô et
                            </a>
                        </td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(users)}">
                        <td colspan="6" class="text-center py-4 bg-light text-secondary">
                            <i class="fas fa-exclamation-circle me-2"></i> He√ß bir istifad…ô√ßi tapƒ±lmadƒ±. Axtarƒ±≈üƒ±nƒ±zƒ± d…ôqiql…ô≈üdirin.
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
</html>